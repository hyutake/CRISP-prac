{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { taskStateActions } from \"./task-slice\";\nimport { useDispatch } from \"react-redux\";\nimport { useEffect } from \"react\";\nexport const fetchTasks = () => {\n  return async dispatch => {\n    try {\n      //fetch the tasks from backend\n      const response = await axios.get(\"http://localhost:3001/tasks\");\n      if (response.status === 200) {\n        const tasks = response.data;\n        return tasks;\n      } else {\n        throw new Error(\"Failed to fetch/update tasks from the API.\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};\nexport const addTask = newTask => {\n  return async dispatch => {\n    //send the new task to the backend\n    await axios.post(\"http://localhost:3001/tasks\", {\n      title: newTask.title,\n      description: newTask.description,\n      deadline: newTask.deadline\n    });\n    //fetch the whole task list\n    const tasks = await dispatch(fetchTasks());\n    //find that specific task\n    const newTaskWithId = tasks.find(task => task.title === newTask.title && task.description === newTask.description);\n    //add the task to the frontend\n    dispatch(taskStateActions.addTask(newTaskWithId));\n  };\n};\nexport const deleteTask = id => {\n  return async () => {\n    await axios.delete(`http://localhost:3001/tasks/${id}`);\n  };\n};\nexport const editTask = editedTask => {\n  return async dispatch => {\n    const {\n      id,\n      title,\n      description,\n      deadline,\n      completed\n    } = editedTask;\n    //updates that specific task on backend\n    axios.put(`http://localhost:3001/tasks/${id}`, {\n      title,\n      description,\n      deadline,\n      completed\n    });\n    //updates on frontend\n    dispatch(taskStateActions.editTask(editedTask));\n  };\n};\nexport const useInitTasks = () => {\n  _s();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const fetchTasksAndInitialize = async () => {\n      try {\n        //dispatch fetch tasks, which fetches and initializes frontend\n        dispatch(fetchTasks()).then(tasks => {\n          dispatch(taskStateActions.setTask(tasks));\n        }).catch(error => {\n          // Handle error if any\n          console.log(error);\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    fetchTasksAndInitialize();\n  }, [dispatch]);\n};\n_s(useInitTasks, \"rAh3tY+Iv6hWC9AI4Dm+rCbkwNE=\", false, function () {\n  return [useDispatch];\n});","map":{"version":3,"names":["axios","taskStateActions","useDispatch","useEffect","fetchTasks","dispatch","response","get","status","tasks","data","Error","error","console","log","addTask","newTask","post","title","description","deadline","newTaskWithId","find","task","deleteTask","id","delete","editTask","editedTask","completed","put","useInitTasks","_s","fetchTasksAndInitialize","then","setTask","catch"],"sources":["/Users/matthewsamynathan/Documents/GitHub/CRISP-prac/frontend/src/store/task-actions.js"],"sourcesContent":["import axios from \"axios\";\nimport { taskStateActions } from \"./task-slice\";\nimport { useDispatch } from \"react-redux\";\nimport { useEffect } from \"react\";\n\nexport const fetchTasks = () => {\n  return async (dispatch) => {\n    try {\n      //fetch the tasks from backend\n      const response = await axios.get(\"http://localhost:3001/tasks\");\n      if (response.status === 200) {\n        const tasks = response.data;\n        return tasks;\n        \n      } else {\n        throw new Error(\"Failed to fetch/update tasks from the API.\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};\n\nexport const addTask = (newTask) => {\n  return async (dispatch) => {\n    //send the new task to the backend\n    await axios.post(\"http://localhost:3001/tasks\", {\n      title: newTask.title,\n      description: newTask.description,\n      deadline: newTask.deadline,\n    });\n    //fetch the whole task list\n    const tasks = await dispatch(fetchTasks());\n    //find that specific task\n    const newTaskWithId = tasks.find((task) => task.title === newTask.title && task.description === newTask.description);\n    //add the task to the frontend\n    dispatch(taskStateActions.addTask(newTaskWithId));    \n  };\n};\n\nexport const deleteTask = (id) => {\n  return async () => {\n    await axios.delete(`http://localhost:3001/tasks/${id}`);\n  };\n};\n\nexport const editTask = (editedTask) => {\n  return async (dispatch) => {\n    const { id, title, description, deadline, completed } = editedTask;\n    //updates that specific task on backend\n    axios.put(`http://localhost:3001/tasks/${id}`, {\n      title,\n      description,\n      deadline,\n      completed,\n    });\n    //updates on frontend\n    dispatch(taskStateActions.editTask(editedTask))\n  };\n};\n\nexport const useInitTasks = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const fetchTasksAndInitialize = async () => {\n      try {\n        //dispatch fetch tasks, which fetches and initializes frontend\n          dispatch(fetchTasks())\n            .then((tasks) => {\n              dispatch(taskStateActions.setTask(tasks));\n            })\n            .catch((error) => {\n              // Handle error if any\n              console.log(error);\n            });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    fetchTasksAndInitialize();\n  }, [dispatch]);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}