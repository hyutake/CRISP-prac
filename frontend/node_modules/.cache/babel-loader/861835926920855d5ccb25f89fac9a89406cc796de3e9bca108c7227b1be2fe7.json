{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\n\n// to remove later\nconst DUMMY_TASKS = [{\n  id: \"t1\",\n  title: \"Laundry\",\n  desc: \"Do laundry\",\n  deadline: \"2023-05-27\"\n}, {\n  id: \"t2\",\n  title: \"Workout\",\n  desc: \"Go to the gym\",\n  deadline: \"2023-05-29\"\n}, {\n  id: \"t3\",\n  title: \"Lorem Ipsum\",\n  desc: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam tempus eros fermentum arcu eleifend porttitor. Ut accumsan dui at maximus rutrum. Quisque tristique maximus pretium. Ut tristique a diam ut luctus. Donec auctor, ante a dictum hendrerit, enim massa pretium massa, vel sagittis diam ligula sed nibh. Donec efficitur turpis sed dolor imperdiet blandit. Vivamus imperdiet elit et felis faucibus mollis. Suspendisse mollis dolor ornare lacus faucibus semper. Proin tempor enim nisl. Curabitur elementum, justo sit amet suscipit tincidunt, sapien eros fringilla sapien, vitae pharetra nunc ipsum eu odio. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nulla pulvinar venenatis erat, nec vulputate tellus.\",\n  deadline: \"2023-06-22\"\n}];\n// const fetchTasksHandler = async () => {\n// \ttry {\n// \t  const response = await fetch('http://localhost:3001/tasks');\n// \t  if (!response.ok) {\n// \t\tthrow new Error('Failed to fetch tasks from the API.');\n// \t  }\n// \t  const data = await response.json();\n// \t  return data; // Return the data from the Promise\n// \t} catch (error) {\n// \t  console.log(error);\n// \t}\n//   };\n\n//   const initialTaskState = {\n// \ttasks: [],\n// \tquantity: 0,\n//   };\n\n//   // Call the fetchTasksHandler and set the initial state with the fetched tasks\n//   fetchTasksHandler().then((data) => {\n// \tconsole.log(data);\n// \tinitialTaskState.tasks = data;\n// \tinitialTaskState.quantity = data.length;\n//   });\n\nconst taskSlice = createSlice({\n  name: \"task\",\n  initialState: {\n    tasks: [],\n    quantity: 0\n  },\n  reducers: {\n    addTask(state, action) {\n      // action will pass an entire task object\n      const task = action.payload;\n      state.tasks.push({\n        id: 't' + Math.random().toString(),\n        title: task.title,\n        desc: task.desc,\n        deadline: task.deadline\n      });\n      state.tasks.sort((a, b) => new Date(a.deadline) - new Date(b.deadline));\n      state.quantity++;\n    },\n    removeTask(state, action) {\n      // action will pass the id of a task\n      const id = action.payload;\n\n      // double confirm deletion\n      const proceed = window.confirm(\"Delete task?\");\n      if (proceed) {\n        state.tasks = state.tasks.filter(task => task.id !== id);\n        state.quantity--;\n      }\n    },\n    editTask(state, action) {\n      // action will pass the edited task\n      const editedTask = action.payload;\n      console.log(\"editedTask.id:\");\n      console.log(editedTask.id);\n\n      // find the matching task stored in the redux context\n      const existingTask = state.tasks.find(task => task.id === editedTask.id);\n      if (!existingTask) {\n        console.log(\"Task does not exist wtf?\");\n      }\n\n      // update values...?\n      existingTask.title = editedTask.title;\n      existingTask.desc = editedTask.desc;\n      existingTask.deadline = editedTask.deadline;\n    }\n  }\n});\nexport const fetchTasks = () => async dispatch => {\n  try {\n    const response = await fetch(\"http://localhost:3001/tasks\");\n    if (!response.ok) {\n      throw new Error(\"Failed to fetch tasks from the API.\");\n    }\n    const data = await response.json();\n    dispatch(taskSlice.actions.setTasks(data));\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const taskActions = taskSlice.actions;\nexport default taskSlice;","map":{"version":3,"names":["createSlice","DUMMY_TASKS","id","title","desc","deadline","taskSlice","name","initialState","tasks","quantity","reducers","addTask","state","action","task","payload","push","Math","random","toString","sort","a","b","Date","removeTask","proceed","window","confirm","filter","editTask","editedTask","console","log","existingTask","find","fetchTasks","dispatch","response","fetch","ok","Error","data","json","actions","setTasks","error","taskActions"],"sources":["/Users/matthewsamynathan/Documents/GitHub/CRISP-prac/frontend/src/store/task-slice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\n// to remove later\nconst DUMMY_TASKS = [\n\t{\n\t\tid: \"t1\",\n\t\ttitle: \"Laundry\",\n\t\tdesc: \"Do laundry\",\n\t\tdeadline: \"2023-05-27\"\n\t},\n\t{\n\t\tid: \"t2\",\n\t\ttitle: \"Workout\",\n\t\tdesc: \"Go to the gym\",\n\t\tdeadline: \"2023-05-29\"\n\t},\n\t{\n\t\tid: \"t3\",\n\t\ttitle: \"Lorem Ipsum\",\n\t\tdesc: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam tempus eros fermentum arcu eleifend porttitor. Ut accumsan dui at maximus rutrum. Quisque tristique maximus pretium. Ut tristique a diam ut luctus. Donec auctor, ante a dictum hendrerit, enim massa pretium massa, vel sagittis diam ligula sed nibh. Donec efficitur turpis sed dolor imperdiet blandit. Vivamus imperdiet elit et felis faucibus mollis. Suspendisse mollis dolor ornare lacus faucibus semper. Proin tempor enim nisl. Curabitur elementum, justo sit amet suscipit tincidunt, sapien eros fringilla sapien, vitae pharetra nunc ipsum eu odio. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nulla pulvinar venenatis erat, nec vulputate tellus.\",\n\t\tdeadline: \"2023-06-22\"\n\t},\n]\n// const fetchTasksHandler = async () => {\n// \ttry {\n// \t  const response = await fetch('http://localhost:3001/tasks');\n// \t  if (!response.ok) {\n// \t\tthrow new Error('Failed to fetch tasks from the API.');\n// \t  }\n// \t  const data = await response.json();\n// \t  return data; // Return the data from the Promise\n// \t} catch (error) {\n// \t  console.log(error);\n// \t}\n//   };\n  \n//   const initialTaskState = {\n// \ttasks: [],\n// \tquantity: 0,\n//   };\n  \n//   // Call the fetchTasksHandler and set the initial state with the fetched tasks\n//   fetchTasksHandler().then((data) => {\n// \tconsole.log(data);\n// \tinitialTaskState.tasks = data;\n// \tinitialTaskState.quantity = data.length;\n//   });\n  \n    \n\nconst taskSlice = createSlice({\n\tname: \"task\",\n\tinitialState: {\n\t\ttasks: [],\n\t\tquantity: 0,\n\t  },\n\treducers: {\n\t\taddTask(state, action) {\n\t\t\t// action will pass an entire task object\n            const task = action.payload;\n\n\t\t\tstate.tasks.push({\n                id: 't' + Math.random().toString(),\n                title: task.title,\n                desc: task.desc,\n                deadline: task.deadline\n            });\n\t\t\tstate.tasks.sort((a, b) => new Date(a.deadline) - new Date(b.deadline));\n\t\t\tstate.quantity++;\n\t\t},\n\t\tremoveTask(state, action) {\n\t\t\t// action will pass the id of a task\n            const id = action.payload;\n\n\t\t\t// double confirm deletion\n\t\t\tconst proceed = window.confirm(\"Delete task?\");\n\n\t\t\tif(proceed) {\n\t\t\t\tstate.tasks = state.tasks.filter((task) => task.id !== id);\n\t\t\t\tstate.quantity--;\n\t\t\t}\n\t\t},\n\t\teditTask(state, action){\n\t\t\t// action will pass the edited task\n\t\t\tconst editedTask = action.payload;\n\t\t\tconsole.log(\"editedTask.id:\");\n\t\t\tconsole.log(editedTask.id);\n\t\t\t\n\t\t\t// find the matching task stored in the redux context\n\t\t\tconst existingTask = state.tasks.find((task) => task.id === editedTask.id);\n\n\t\t\tif(!existingTask) {\n\t\t\t\tconsole.log(\"Task does not exist wtf?\");\n\t\t\t}\n\n\t\t\t// update values...?\n\t\t\texistingTask.title = editedTask.title;\n\t\t\texistingTask.desc = editedTask.desc;\n\t\t\texistingTask.deadline = editedTask.deadline;\n\t\t}  \n\t},\n});\n\nexport const fetchTasks = () => async (dispatch) => {\n\ttry {\n\t  const response = await fetch(\"http://localhost:3001/tasks\");\n\t  if (!response.ok) {\n\t\tthrow new Error(\"Failed to fetch tasks from the API.\");\n\t  }\n\t  const data = await response.json();\n\t  dispatch(taskSlice.actions.setTasks(data));\n\t} catch (error) {\n\t  console.log(error);\n\t}\n  };\n\nexport const taskActions = taskSlice.actions;\nexport default taskSlice;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}