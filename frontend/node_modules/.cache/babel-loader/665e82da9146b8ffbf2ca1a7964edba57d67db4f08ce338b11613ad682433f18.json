{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport fetchTasks from \"./useFetchTasks\";\nimport App from \"../App\";\nconst initialTaskState = {\n  tasks: []\n  //quantity: 0,\n};\n\nconst taskSlice = createSlice({\n  name: \"task\",\n  initialState: initialTaskState,\n  reducers: {\n    addTask(state, action) {\n      // action will pass an entire task object\n      const task = action.payload;\n      axios.post(\"http://localhost:3001/tasks\", {\n        title: task.title,\n        description: task.description,\n        deadline: task.deadline\n      });\n      window.location.reload();\n    },\n    removeTask(state, action) {\n      // action will pass the id of a task\n      const id = action.payload;\n\n      // double confirm deletion\n      const proceed = window.confirm(\"Delete task?\");\n      if (proceed) {\n        state.tasks = state.tasks.filter(task => task._id !== id);\n        axios.delete(`http://localhost:3001/tasks/${id}`);\n      }\n    },\n    editTask(state, action) {\n      // action will pass the edited task\n      console.log(action.payload);\n      const {\n        id,\n        title,\n        description,\n        deadline,\n        completed\n      } = action.payload;\n\n      //Make the PUT request to update the task on the backend\n      axios.put(`http://localhost:3001/tasks/${id}`, {\n        title,\n        description,\n        deadline,\n        completed\n      }).then(() => {\n        dispatch(fetchTasks.fetchTasks()); // Dispatch the fetchTasks action after updating the task\n      }).catch(error => {\n        console.log(error);\n      });\n      // .then(() => {\n      //   fetchTasks(dispatch); // Dispatch the fetchTasks action after updating the task\n      // })\n      // .catch((error) => {\n      //   console.log(error);\n      // });\n      //manually update tasks, \n      //fetch tasks here,\n      // and call set task reducer method with payload\n      //window.location.reload();\n    },\n\n    setTask(state, action) {\n      action.payload.sort((a, b) => new Date(a.deadline) - new Date(b.deadline));\n      state.tasks = action.payload;\n    }\n  }\n});\nexport const taskActions = taskSlice.actions;\nexport default taskSlice;","map":{"version":3,"names":["createSlice","axios","fetchTasks","App","initialTaskState","tasks","taskSlice","name","initialState","reducers","addTask","state","action","task","payload","post","title","description","deadline","window","location","reload","removeTask","id","proceed","confirm","filter","_id","delete","editTask","console","log","completed","put","then","dispatch","catch","error","setTask","sort","a","b","Date","taskActions","actions"],"sources":["/Users/matthewsamynathan/Documents/GitHub/CRISP-prac/frontend/src/store/task-slice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport fetchTasks from \"./useFetchTasks\";\nimport App from \"../App\";\nconst initialTaskState = {\n  tasks: [],\n  //quantity: 0,\n};\n\nconst taskSlice = createSlice({\n\t\n  name: \"task\",\n  initialState: initialTaskState,\n  reducers: {\n    addTask(state, action) {\n      // action will pass an entire task object\n\t\tconst task = action.payload;\n      axios\n        .post(\"http://localhost:3001/tasks\", {\n          title: task.title,\n          description: task.description,\n          deadline: task.deadline,\n        })\n    window.location.reload();\n    },\n    removeTask(state, action) {\n      // action will pass the id of a task\n      const id = action.payload;\n\n      // double confirm deletion\n      const proceed = window.confirm(\"Delete task?\");\n\n      if (proceed) {\n        state.tasks = state.tasks.filter((task) => task._id !== id);\n        axios.delete(`http://localhost:3001/tasks/${id}`);\n      }\n    },\n    editTask(state, action) {\n\t\t\n      // action will pass the edited task\n      console.log(action.payload);\n      const { id, title, description, deadline, completed } = action.payload;\n\t\n      //Make the PUT request to update the task on the backend\n      axios\n    .put(`http://localhost:3001/tasks/${id}`, {\n      title,\n      description,\n      deadline,\n      completed,\n    })\n    .then(() => {\n      dispatch(fetchTasks.fetchTasks()); // Dispatch the fetchTasks action after updating the task\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n      // .then(() => {\n      //   fetchTasks(dispatch); // Dispatch the fetchTasks action after updating the task\n      // })\n      // .catch((error) => {\n      //   console.log(error);\n      // });\n      //manually update tasks, \n      //fetch tasks here,\n      // and call set task reducer method with payload\n      //window.location.reload();\n      \n      \n    },\n    setTask(state, action) {\n\t  action.payload.sort((a, b) => new Date(a.deadline) - new Date(b.deadline));\n      state.tasks = action.payload;\n    },\n  },\n});\n\nexport const taskActions = taskSlice.actions;\nexport default taskSlice;\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,UAAU,MAAM,iBAAiB;AACxC,OAAOC,GAAG,MAAM,QAAQ;AACxB,MAAMC,gBAAgB,GAAG;EACvBC,KAAK,EAAE;EACP;AACF,CAAC;;AAED,MAAMC,SAAS,GAAGN,WAAW,CAAC;EAE5BO,IAAI,EAAE,MAAM;EACZC,YAAY,EAAEJ,gBAAgB;EAC9BK,QAAQ,EAAE;IACRC,OAAOA,CAACC,KAAK,EAAEC,MAAM,EAAE;MACrB;MACJ,MAAMC,IAAI,GAAGD,MAAM,CAACE,OAAO;MACvBb,KAAK,CACFc,IAAI,CAAC,6BAA6B,EAAE;QACnCC,KAAK,EAAEH,IAAI,CAACG,KAAK;QACjBC,WAAW,EAAEJ,IAAI,CAACI,WAAW;QAC7BC,QAAQ,EAAEL,IAAI,CAACK;MACjB,CAAC,CAAC;MACNC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;IACxB,CAAC;IACDC,UAAUA,CAACX,KAAK,EAAEC,MAAM,EAAE;MACxB;MACA,MAAMW,EAAE,GAAGX,MAAM,CAACE,OAAO;;MAEzB;MACA,MAAMU,OAAO,GAAGL,MAAM,CAACM,OAAO,CAAC,cAAc,CAAC;MAE9C,IAAID,OAAO,EAAE;QACXb,KAAK,CAACN,KAAK,GAAGM,KAAK,CAACN,KAAK,CAACqB,MAAM,CAAEb,IAAI,IAAKA,IAAI,CAACc,GAAG,KAAKJ,EAAE,CAAC;QAC3DtB,KAAK,CAAC2B,MAAM,CAAE,+BAA8BL,EAAG,EAAC,CAAC;MACnD;IACF,CAAC;IACDM,QAAQA,CAAClB,KAAK,EAAEC,MAAM,EAAE;MAEtB;MACAkB,OAAO,CAACC,GAAG,CAACnB,MAAM,CAACE,OAAO,CAAC;MAC3B,MAAM;QAAES,EAAE;QAAEP,KAAK;QAAEC,WAAW;QAAEC,QAAQ;QAAEc;MAAU,CAAC,GAAGpB,MAAM,CAACE,OAAO;;MAEtE;MACAb,KAAK,CACNgC,GAAG,CAAE,+BAA8BV,EAAG,EAAC,EAAE;QACxCP,KAAK;QACLC,WAAW;QACXC,QAAQ;QACRc;MACF,CAAC,CAAC,CACDE,IAAI,CAAC,MAAM;QACVC,QAAQ,CAACjC,UAAU,CAACA,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;MACrC,CAAC,CAAC,CACDkC,KAAK,CAAEC,KAAK,IAAK;QAChBP,OAAO,CAACC,GAAG,CAACM,KAAK,CAAC;MACpB,CAAC,CAAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IAGF,CAAC;;IACDC,OAAOA,CAAC3B,KAAK,EAAEC,MAAM,EAAE;MACxBA,MAAM,CAACE,OAAO,CAACyB,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIC,IAAI,CAACF,CAAC,CAACtB,QAAQ,CAAC,GAAG,IAAIwB,IAAI,CAACD,CAAC,CAACvB,QAAQ,CAAC,CAAC;MACvEP,KAAK,CAACN,KAAK,GAAGO,MAAM,CAACE,OAAO;IAC9B;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAM6B,WAAW,GAAGrC,SAAS,CAACsC,OAAO;AAC5C,eAAetC,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}