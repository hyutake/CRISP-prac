{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport useFetchTasks, { fetchTasks, useInitTasks } from \"./useFetchTasks\";\nconst initialTaskState = {\n  tasks: []\n  //quantity: 0,\n};\n\nconst taskSlice = createSlice({\n  name: \"task\",\n  initialState: initialTaskState,\n  reducers: {\n    addTask(state, action) {\n      // action will pass an entire task object\n      const task = action.payload;\n      state.tasks.push({\n        _id: task._id,\n        title: task.title,\n        desc: task.desc,\n        deadline: task.deadline,\n        status: 'In progress',\n        // newly added tasks will ALWAYS be 'In progress'\n        completedDate: null // newly added tasks will not have a completedDate value yet\n      });\n\n      state.tasks.sort((a, b) => new Date(a.deadline) - new Date(b.deadline));\n    },\n    removeTask(state, action) {\n      // action will pass the id of a task\n      const id = action.payload;\n      state.tasks = state.tasks.filter(task => task._id !== id);\n    },\n    editTask(state, action) {\n      //dispatch can be taken in as arg\n      // action will pass the edited task\n      console.log(action.payload);\n      const editedTask = action.payload;\n      const {\n        id,\n        title,\n        description,\n        deadline,\n        completed\n      } = action.payload;\n      const existingTask = state.tasks.find(task => task._id === editedTask._id);\n      if (!existingTask) {\n        console.log(\"Task does not exist or using RouterApp!\");\n      }\n      existingTask = editedTask;\n      //fetchTasks\n      //setTasks\n\n      state.tasks[id] = action.payload;\n\n      //refactor into another event, \n      //have another actions file\n    },\n\n    setTask(state, action) {\n      //action.payload.sort((a, b) => new Date(a.deadline) - new Date(b.deadline));\n      while (state.tasks != action.payload) {\n        state.tasks = action.payload;\n      }\n    }\n  }\n});\nexport const taskActions = taskSlice.actions;\nexport default taskSlice;","map":{"version":3,"names":["createSlice","axios","useFetchTasks","fetchTasks","useInitTasks","initialTaskState","tasks","taskSlice","name","initialState","reducers","addTask","state","action","task","payload","push","_id","title","desc","deadline","status","completedDate","sort","a","b","Date","removeTask","id","filter","editTask","console","log","editedTask","description","completed","existingTask","find","setTask","taskActions","actions"],"sources":["/Users/matthewsamynathan/Documents/GitHub/CRISP-prac/frontend/src/store/task-slice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport useFetchTasks, { fetchTasks, useInitTasks } from \"./useFetchTasks\";\nconst initialTaskState = {\n  tasks: [],\n  //quantity: 0,\n};\n\nconst taskSlice = createSlice({\n\t\n  name: \"task\",\n  initialState: initialTaskState,\n  reducers: {\n    addTask(state, action) {\n      // action will pass an entire task object\n      const task = action.payload;\n\n\t\t\tstate.tasks.push({\n\t\t\t\t_id: task._id,\n                title: task.title,\n                desc: task.desc,\n                deadline: task.deadline,\n\t\t\t\tstatus: 'In progress',\t// newly added tasks will ALWAYS be 'In progress'\n\t\t\t\tcompletedDate: null\t\t// newly added tasks will not have a completedDate value yet\n            });\n\t\t\tstate.tasks.sort((a, b) => new Date(a.deadline) - new Date(b.deadline));\n    },\n    removeTask(state, action) {\n      // action will pass the id of a task\n      const id = action.payload;\n      state.tasks = state.tasks.filter((task) => task._id !== id);\n    },\n    editTask(state, action) { \n      //dispatch can be taken in as arg\n      // action will pass the edited task\n      console.log(action.payload);\n      const editedTask = action.payload;\n      const { id, title, description, deadline, completed } = action.payload;\n      const existingTask = state.tasks.find((task) => task._id === editedTask._id);\n      if(!existingTask) {\n\t\t\t\tconsole.log(\"Task does not exist or using RouterApp!\");\n\t\t\t}\n      existingTask = editedTask;\n      //fetchTasks\n      //setTasks\n      \n      state.tasks[id] = action.payload;\n\n      //refactor into another event, \n      //have another actions file\n      \n    },\n    setTask(state, action) {\n\t  //action.payload.sort((a, b) => new Date(a.deadline) - new Date(b.deadline));\n      while (state.tasks != action.payload){\n        state.tasks = action.payload;\n      }\n    },\n  },\n});\n\nexport const taskActions = taskSlice.actions;\nexport default taskSlice;\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,aAAa,IAAIC,UAAU,EAAEC,YAAY,QAAQ,iBAAiB;AACzE,MAAMC,gBAAgB,GAAG;EACvBC,KAAK,EAAE;EACP;AACF,CAAC;;AAED,MAAMC,SAAS,GAAGP,WAAW,CAAC;EAE5BQ,IAAI,EAAE,MAAM;EACZC,YAAY,EAAEJ,gBAAgB;EAC9BK,QAAQ,EAAE;IACRC,OAAOA,CAACC,KAAK,EAAEC,MAAM,EAAE;MACrB;MACA,MAAMC,IAAI,GAAGD,MAAM,CAACE,OAAO;MAE9BH,KAAK,CAACN,KAAK,CAACU,IAAI,CAAC;QAChBC,GAAG,EAAEH,IAAI,CAACG,GAAG;QACDC,KAAK,EAAEJ,IAAI,CAACI,KAAK;QACjBC,IAAI,EAAEL,IAAI,CAACK,IAAI;QACfC,QAAQ,EAAEN,IAAI,CAACM,QAAQ;QACnCC,MAAM,EAAE,aAAa;QAAE;QACvBC,aAAa,EAAE,IAAI,CAAE;MACb,CAAC,CAAC;;MACXV,KAAK,CAACN,KAAK,CAACiB,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIC,IAAI,CAACF,CAAC,CAACJ,QAAQ,CAAC,GAAG,IAAIM,IAAI,CAACD,CAAC,CAACL,QAAQ,CAAC,CAAC;IACtE,CAAC;IACDO,UAAUA,CAACf,KAAK,EAAEC,MAAM,EAAE;MACxB;MACA,MAAMe,EAAE,GAAGf,MAAM,CAACE,OAAO;MACzBH,KAAK,CAACN,KAAK,GAAGM,KAAK,CAACN,KAAK,CAACuB,MAAM,CAAEf,IAAI,IAAKA,IAAI,CAACG,GAAG,KAAKW,EAAE,CAAC;IAC7D,CAAC;IACDE,QAAQA,CAAClB,KAAK,EAAEC,MAAM,EAAE;MACtB;MACA;MACAkB,OAAO,CAACC,GAAG,CAACnB,MAAM,CAACE,OAAO,CAAC;MAC3B,MAAMkB,UAAU,GAAGpB,MAAM,CAACE,OAAO;MACjC,MAAM;QAAEa,EAAE;QAAEV,KAAK;QAAEgB,WAAW;QAAEd,QAAQ;QAAEe;MAAU,CAAC,GAAGtB,MAAM,CAACE,OAAO;MACtE,MAAMqB,YAAY,GAAGxB,KAAK,CAACN,KAAK,CAAC+B,IAAI,CAAEvB,IAAI,IAAKA,IAAI,CAACG,GAAG,KAAKgB,UAAU,CAAChB,GAAG,CAAC;MAC5E,IAAG,CAACmB,YAAY,EAAE;QACpBL,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC;MACvD;MACGI,YAAY,GAAGH,UAAU;MACzB;MACA;;MAEArB,KAAK,CAACN,KAAK,CAACsB,EAAE,CAAC,GAAGf,MAAM,CAACE,OAAO;;MAEhC;MACA;IAEF,CAAC;;IACDuB,OAAOA,CAAC1B,KAAK,EAAEC,MAAM,EAAE;MACxB;MACG,OAAOD,KAAK,CAACN,KAAK,IAAIO,MAAM,CAACE,OAAO,EAAC;QACnCH,KAAK,CAACN,KAAK,GAAGO,MAAM,CAACE,OAAO;MAC9B;IACF;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAMwB,WAAW,GAAGhC,SAAS,CAACiC,OAAO;AAC5C,eAAejC,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}